{% extends "../userManger_content_base.html" %}
        {% block header_navs %}
            <li {% if first_nav_name == 'project' %}class="active"{% endif %}><a href="/userCenter/userCenter/">个人中心</a></li>
        {% endblock %}
        {% block content-panel %}
				<div class="xui-i-content">
									
						<div class="form-group">
							<label for="inputEmail3" class="col-sm-3 control-label">标题</label>
							<div class="col-sm-8">
								<input type="text" class="form-control xa-buyerId" value="{{order.buyerId}}" placeholder="">
							</div>
						</div>
									
						<div class="form-group">
							<label for="inputEmail3" class="col-sm-3 control-label">内容</label>
							<div class="col-sm-8">
								<div class="" id="container"></div>
							</div>
						</div>
									
						
					
					<div class="form-group">
						<span class="btn btn-success mt20 mb30 xa-submit" data-id={{order.id}}>保存</span>
					</div>
				</div>
	{% endblock %}
	
	{% block js %}
	<script type="text/javascript">
	
	    $(document).ready(function() {
			var ue;
		 	_.delay(function() {
		 		var html = $("#xa-html").attr("data-str")
				//$("#xa-html").html(html);
			    // start uideit
		    	ue = UE.getEditor('container', {
				    autoHeight: false
				});
							
				//对编辑器的操作最好在编辑器ready之后再做
				ue.ready(function() {
				    //设置编辑器的内容
				    ue.setContent($("#xa-html").attr("data-str"));
				    //获取html内容，返回: <p>hello</p>
				    var html = ue.getContent();
				    //获取纯文本内容，返回: hello
				    var txt = ue.getContentTxt();
				});
				// end
			 }, 100);
		 	
			$(document).delegate(".xa-submit","click",function(){
				var data = {};
				
				data.buyerId = $(".xa-buyerId").val();
				
				data.sellerId = $(".xa-sellerId").val();
				
				data.price = $(".xa-price").val();
				
				data.gameTime = $(".xa-gameTime").val();
				
				data.creatTime = $(".xa-creatTime").val();
				
				data.state = $(".xa-state").val();
				
				data.orderid = $(this).attr('data-id');
				console.log(data);
				W.Resource.put({
					resource: 'news.news',
					data: data,
					success: function(data) {
						W.showHint('success', '成功，重新加载页面...');
						_.delay(function() {
						    window.location.reload();
						}, 1000);
					},
					error: function() {
					W.showHint('error', '更新失败！');
	        		}
				})		
	            
			})
	    });
	</script>
	{% endblock %}
	